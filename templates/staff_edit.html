{% extends "base.html" %}

{% block title %}Edit Staff{% endblock %}
{% block page_title %}Edit Staff Member{% endblock %}
{% block page_subtitle %}Update staff details{% endblock %}

{% block content %}
<div class="content-card">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h4>Edit â€” STF-{{ staff.id }}</h4>
        <a href="{{ url_for('staff') }}" class="btn btn-secondary">
            <i class="fas fa-arrow-left"></i> Back to Directory
        </a>
    </div>

    <form method="POST" action="{{ url_for('edit_staff', staff_id=staff.id) }}">
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">First Name *</label>
                <input type="text" class="form-control" name="first_name" value="{{ staff.first_name }}" required>
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Last Name *</label>
                <input type="text" class="form-control" name="last_name" value="{{ staff.last_name }}" required>
            </div>
        </div>

        <!-- NEW: ID number row -->
        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">ID No</label>
                <input type="text" class="form-control" name="id_number" value="{{ staff.id_number or '' }}" placeholder="National / ID number">
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Position *</label>
                <input type="text" class="form-control" name="position" value="{{ staff.position }}" required>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Department</label>
                <select class="form-select" name="department">
                    <option value="" {% if not staff.department %}selected{% endif %}>Select Department</option>
                    <option value="management" {% if staff.department == 'management' %}selected{% endif %}>Management</option>
                    <option value="medical" {% if staff.department == 'medical' %}selected{% endif %}>Medical</option>
                    <option value="nutrition" {% if staff.department == 'nutrition' %}selected{% endif %}>Nutrition</option>
                    <option value="breeding" {% if staff.department == 'breeding' %}selected{% endif %}>Breeding</option>
                    <option value="sales" {% if staff.department == 'sales' %}selected{% endif %}>Sales</option>
                    <option value="maintenance" {% if staff.department == 'maintenance' %}selected{% endif %}>Maintenance</option>
                </select>
            </div>

            <div class="col-md-6 mb-3">
                <label class="form-label">Email</label>
                <input type="email" class="form-control" name="email" value="{{ staff.email or '' }}">
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Phone *</label>
                <input type="tel" class="form-control" name="phone" value="{{ staff.phone }}" required>
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Address</label>
                <input type="text" class="form-control" name="address" value="{{ staff.address or '' }}">
            </div>
        </div>

        <div class="row">
            <div class="col-md-6 mb-3">
                <label class="form-label">Date of Birth</label>
                <input type="date" class="form-control" name="dob" value="{{ staff.dob or '' }}">
            </div>
            <div class="col-md-6 mb-3">
                <label class="form-label">Date Employed</label>
                <input type="date" class="form-control" name="date_employed" value="{{ staff.date_employed or '' }}">
            </div>
        </div>

        <div class="mb-3">
            <label class="form-label">Status</label>
            <select class="form-select" name="status">
                <option value="Active" {% if staff.status == 'Active' %}selected{% endif %}>Active</option>
                <option value="On Leave" {% if staff.status == 'On Leave' %}selected{% endif %}>On Leave</option>
                <option value="Inactive" {% if staff.status == 'Inactive' %}selected{% endif %}>Inactive</option>
            </select>
        </div>

        <div class="d-flex justify-content-end">
            <button type="button" class="btn btn-secondary me-2" onclick="window.location='{{ url_for('staff') }}'">Cancel</button>
            <button type="submit" class="btn btn-primary">Save Changes</button>
        </div>
    </form>
</div>
{% endblock %}
